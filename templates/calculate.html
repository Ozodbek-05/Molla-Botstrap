<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kalkulyator</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#0f172a;--card:#111827;--muted:#6b7280;--accent:#6366f1;--accent2:#8b5cf6;--text:#e5e7eb;--ok:#10b981;--err:#ef4444}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;background:linear-gradient(135deg,#0f172a,#111827 60%,#0b1022);color:var(--text);display:grid;place-items:center}
    .wrap{width:min(520px,92%)}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.08);border-radius:20px;padding:24px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
    h1{margin:0 0 14px;font-size:28px;letter-spacing:.2px}
    .sub{margin:-2px 0 20px;color:var(--muted);font-size:14px}
    form{display:grid;gap:14px}
    .row{display:grid;grid-template-columns:1fr 120px 1fr;gap:10px}
    .field{position:relative}
    input,select,button{width:100%;border:1px solid rgba(255,255,255,.12);background:#0b1022;color:var(--text);border-radius:14px;padding:14px 14px;font-size:16px;outline:none;transition:box-shadow .2s,border-color .2s}
    input:focus,select:focus{border-color:rgba(99,102,241,.7);box-shadow:0 0 0 4px rgba(99,102,241,.15)}
    select{cursor:pointer;text-align:center}
    .actions{display:grid;grid-template-columns:1fr 120px;gap:10px;margin-top:4px}
    .btn{border:none;background:linear-gradient(135deg,var(--accent),var(--accent2));cursor:pointer;font-weight:600}
    .btn:active{transform:translateY(1px)}
    .ghost{background:transparent;border:1px solid rgba(255,255,255,.14)}
    .result{margin-top:14px;padding:16px;border:1px dashed rgba(255,255,255,.18);border-radius:14px;display:flex;justify-content:space-between;align-items:center}
    .badge{font-size:12px;padding:6px 10px;border-radius:999px;background:rgba(99,102,241,.15);border:1px solid rgba(99,102,241,.35)}
    .value{font-weight:700;font-size:22px}
    .status{font-size:13px}
    .ok{color:var(--ok)}
    .err{color:var(--err)}
    .history{margin-top:14px;max-height:180px;overflow:auto;border-top:1px solid rgba(255,255,255,.08);padding-top:12px}
    .history h3{margin:0 0 8px;font-size:14px;color:var(--muted)}
    .item{font-size:14px;padding:8px 10px;border:1px solid rgba(255,255,255,.08);border-radius:10px;margin-bottom:8px;background:#0b1022}
    .foot{margin-top:8px;text-align:center;color:var(--muted);font-size:12px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Kalkulyator</h1>
      <div class="sub">Sonlarni kiriting va amalni tanlang</div>
      <form id="calc">
        <div class="row">
          <div class="field"><input id="a" type="number" step="any" placeholder="Birinchi son"></div>
          <div class="field">
            <select id="op">
              <option value="+">+</option>
              <option value="-">−</option>
              <option value="*">×</option>
              <option value="/">÷</option>
              <option value="^">xʸ</option>
              <option value="%">mod</option>
            </select>
          </div>
          <div class="field"><input id="b" type="number" step="any" placeholder="Ikkinchi son"></div>
        </div>
        <div class="actions">
          <button class="btn" type="submit">Hisoblash</button>
          <button class="ghost" type="button" id="clear">Tozalash</button>
        </div>
        <div class="result">
          <span class="badge">Natija</span>
          <span class="value" id="out">—</span>
        </div>
        <div class="status" id="status"></div>
        <div class="history" id="history" hidden>
          <h3>Tarix</h3>
          <div id="items"></div>
        </div>
        <div class="foot">Enter tugmasi bilan ham hisoblash mumkin</div>
      </form>
    </div>
  </div>
  <script>
    const a=document.getElementById('a');
    const b=document.getElementById('b');
    const op=document.getElementById('op');
    const out=document.getElementById('out');
    const statusEl=document.getElementById('status');
    const form=document.getElementById('calc');
    const clear=document.getElementById('clear');
    const historyWrap=document.getElementById('history');
    const items=document.getElementById('items');

    function fmt(x){
      if(!isFinite(x)) return '∞';
      const s=Number(x);
      if (Math.abs(s) < 1e-6) return '0';
      return Math.abs(s)>=1e6? s.toExponential(6): parseFloat(s.toFixed(10)).toString();
    }

    function calc(){
      const x=parseFloat(a.value);
      const y=parseFloat(b.value);
      if(Number.isNaN(x)||Number.isNaN(y)){
        statusEl.textContent='Iltimos, ikkala maydonga ham son kiriting';
        statusEl.className='status err';
        out.textContent='—';
        return null;
      }
      let r=null, msg='OK', ok=true;
      switch(op.value){
        case '+': r=x+y; break;
        case '-': r=x-y; break;
        case '*': r=x*y; break;
        case '/': if(y===0){ok=false; msg='0 ga bo‘lish mumkin emas';} r= ok? x/y: null; break;
        case '^': r=Math.pow(x,y); break;
        case '%': if(!Number.isInteger(x)||!Number.isInteger(y)){ok=false; msg='mod uchun butun son kiriting';} r= ok? x%y: null; break;
      }
      if(!ok){
        statusEl.textContent=msg;
        statusEl.className='status err';
        out.textContent='—';
        return null;
      }
      const val=fmt(r);
      out.textContent=val;
      statusEl.textContent='Hisoblandi';
      statusEl.className='status ok';
      const line=`${fmt(x)} ${op.value} ${fmt(y)} = ${val}`;
      const div=document.createElement('div');
      div.className='item';
      div.textContent=line;
      items.prepend(div);
      historyWrap.hidden=false;
      return r;
    }

    form.addEventListener('submit',e=>{e.preventDefault();calc();});
    [a,b,op].forEach(el=>el.addEventListener('keydown',e=>{if(e.key==='Enter'){e.preventDefault();calc();}}));
    clear.addEventListener('click',()=>{a.value='';b.value='';out.textContent='—';statusEl.textContent='';statusEl.className='status';});
  </script>
</body>
</html>
